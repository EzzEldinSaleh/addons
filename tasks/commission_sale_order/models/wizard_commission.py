from odoo import api, fields, modelsimport datetimeclass commisstionsale(models.TransientModel):    _name="wizard.comm"    def commission_run(self,):            com = self.env['commission'].search([])            for c in com:                x = datetime.datetime.now()                saleorders = self.env['sale.order'].search([('is_check', '=', False), ('state', '=', 'sale')])                data = {}                for sale in saleorders:                    if sale.date_order.month == x.month:                        amount = 0                        for invoice in sale.invoice_ids:                            if invoice.payment_state == 'in_payment' or invoice.payment_state == 'partial':                                amount += invoice.amount_total_signed - invoice.amount_residual                        if sale.user_id.name not in data:                            data[str(sale.user_id.name)] = {                                'name': sale.user_id.name,                                'total': amount, }                        else:                            data[str(sale.user_id.name)]['total'] = amount                        if amount >= c.amount_from and amount <= c.amount_to:                            vals = {                                'payment_type': 'outbound',                                'partner_type': 'supplier',                                'ref':"Commission off month %s salesperson %s"%(x.month,sale.user_id.name),                                # 'name':self.name,                                'partner_id':sale.user_id.partner_id.id,                                'date': sale.date_order,                                'amount': c.amount_des                            }                            sale.is_check = True                            self.env['account.payment'].create(vals)